<main class="container">
  <div class="ajouterBtn">
    <button mat-raised-button color="primary" (click)="remplirBD()">PEUPLER BD</button>
    <a routerLink="/add">
      <button mat-flat-button color="accent">Ajouter Assignment</button>
    </a>
  </div>

  <div class="center">
    <mat-card-title color="accent">Liste des assignments</mat-card-title>
  </div>
  <table mat-table [dataSource]="assignments" matSort>
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.id }} </mat-cell>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Nom </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.nom }} </mat-cell>
    </ng-container>

    <!-- Matiere Column -->
    <ng-container matColumnDef="matiere">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Matiere </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.matiere }} </mat-cell>
    </ng-container>

    <!-- Auteur Column -->
    <ng-container matColumnDef="auteur">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Auteur </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.auteur }} </mat-cell>
    </ng-container>

    <!-- Date Column -->
    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Date de Rendu
      </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{ row.dateDeRendu | date }} </mat-cell>
    </ng-container>

    <!-- Rendu Column -->
    <ng-container matColumnDef="rendu">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Rendu
      </mat-header-cell>
      <mat-cell
        *matCellDef="let row"
        [style.color]="row.rendu ? 'green' : 'red'"
      >
        {{ row.rendu }}
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="edit">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Edit
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <button mat-icon-button color="primary" (click)="rowClicked(row.id)">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="delete">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Delete
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <button mat-icon-button color="warn" (click)="DeleteAssignment(row)">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row
      *matRowDef="let row; columns: displayedColumns"
      class="element-row"
    >
    </mat-row>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>

  <div class="pagination">
    <button
      mat-stroked-button
      color="primary"
      (click)="premierePage()"
      [disabled]="page === 1"
    >
      Première page
    </button>
    &nbsp;
    <button
      mat-stroked-button
      color="primary"
      (click)="pagePrecedente()"
      [disabled]="!hasPrevPage"
    >
      Page précédente
    </button>
    &nbsp;
    <button
      mat-stroked-button
      color="primary"
      (click)="pageSuivante()"
      [disabled]="!hasNextPage"
    >
      Page suivante
    </button>
    &nbsp;
    <button
      mat-stroked-button
      color="primary"
      (click)="dernierePage()"
      [disabled]="page === totalPages"
    >
      Dernière page
    </button>
  </div>
</main>
